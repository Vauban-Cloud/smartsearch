import{a as ae,Q as X}from"./QCard-CHsZtA31.js";import{u as lt,a as st,G as it,d as rt,H as ut,I as Ke,p as At,Q as se,q as ct}from"./QDialog-BdWVmjKO.js";import{c as Ie,ad as dt,ae as gt,a as y,h as m,b as fe,g as Qe,af as Xe,r as U,w as me,ag as ft,d as Ze,B as Ue,V as mt,R as Fe,A as ke,y as et,s as vt,ah as It,W as Qt,ai as ht,U as Le,aj as Bt,a0 as W,H as pt,ak as Ct,al as yt,am as wt,J as he,o as bt,X as Ye,N as re,Y as x,L as we,_ as E,Z as d,M as Dt,an as Et,a5 as Re,$ as Te,ao as St,a3 as _t}from"./index-qJ404lHB.js";import{u as Ce,a as ye}from"./use-dark-8dV3cMn6.js";import{Q as Ut,a as Ft,d as Ve,c as be,e as ue,C as Me}from"./QSelect-CMeDH2N1.js";import{Q as xt,a as kt}from"./QPage-J5emjgrL.js";import{config as J}from"./config-CN_oh__8.js";import"./i18n-CZWSIRkG.js";const ze=Ie({name:"QCardActions",props:{...dt,vertical:Boolean},setup(e,{slots:n}){const a=gt(e),o=y(()=>`q-card__actions ${a.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>m("div",{class:o.value},fe(n.default))}}),qt=Ie({name:"QBanner",props:{...Ce,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:n}){const{proxy:{$q:a}}=Qe(),o=ye(e,a),i=y(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),u=y(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const D=[m("div",{class:"q-banner__avatar col-auto row items-center self-start"},fe(n.avatar)),m("div",{class:"q-banner__content col text-body2"},fe(n.default))],f=fe(n.action);return f!==void 0&&D.push(m("div",{class:u.value},f)),m("div",{class:i.value+(e.inlineActions===!1&&f!==void 0?" q-banner--top-padding":""),role:"alert"},D)}}}),Nt={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},De={xs:2,sm:4,md:8,lg:16,xl:24},Oe=Ie({name:"QSeparator",props:{...Ce,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const n=Qe(),a=ye(e,n.proxy.$q),o=y(()=>e.vertical===!0?"vertical":"horizontal"),i=y(()=>` q-separator--${o.value}`),u=y(()=>e.inset!==!1?`${i.value}-${Nt[e.inset]}`:""),D=y(()=>`q-separator${i.value}${u.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(a.value===!0?" q-separator--dark":"")),f=y(()=>{const K={};if(e.size!==void 0&&(K[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const S=e.spaced===!0?`${De.md}px`:e.spaced in De?`${De[e.spaced]}px`:e.spaced,I=e.vertical===!0?["Left","Right"]:["Top","Bottom"];K[`margin${I[0]}`]=K[`margin${I[1]}`]=S}return K});return()=>m("hr",{class:D.value,style:f.value,"aria-orientation":o.value})}}),ne=ft({}),Kt=Object.keys(Xe),Ae=Ie({name:"QExpansionItem",props:{...Xe,...st,...Ce,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...lt,"click","afterShow","afterHide"],setup(e,{slots:n,emit:a}){const{proxy:{$q:o}}=Qe(),i=ye(e,o),u=U(e.modelValue!==null?e.modelValue:e.defaultOpened),D=U(null),f=it(),{show:K,hide:S,toggle:I}=rt({showing:u});let _,L;const O=y(()=>`q-expansion-item q-item-type q-expansion-item--${u.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),t=y(()=>e.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),B=y(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),k=y(()=>{const v={};return Kt.forEach(G=>{v[G]=e[G]}),v}),Q=y(()=>B.value===!0||e.expandIconToggle!==!0),r=y(()=>e.expandedIcon!==void 0&&u.value===!0?e.expandedIcon:e.expandIcon||o.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),q=y(()=>e.disable!==!0&&(B.value===!0||e.expandIconToggle===!0)),Y=y(()=>({expanded:u.value===!0,detailsId:f.value,toggle:I,show:K,hide:S})),V=y(()=>{const v=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:o.lang.label[u.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":u.value===!0?"true":"false","aria-controls":f.value,"aria-label":v}});me(()=>e.group,v=>{L!==void 0&&L(),v!==void 0&&M()});function l(v){B.value!==!0&&I(v),a("click",v)}function c(v){v.keyCode===13&&C(v,!0)}function C(v,G){G!==!0&&D.value!==null&&D.value.focus(),I(v),ke(v)}function h(){a("afterShow")}function w(){a("afterHide")}function M(){_===void 0&&(_=ut()),u.value===!0&&(ne[e.group]=_);const v=me(u,$=>{$===!0?ne[e.group]=_:ne[e.group]===_&&delete ne[e.group]}),G=me(()=>ne[e.group],($,g)=>{g===_&&$!==void 0&&$!==_&&S()});L=()=>{v(),G(),ne[e.group]===_&&delete ne[e.group],L=void 0}}function p(){const v={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},G=[m(Fe,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&u.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:r.value})];return q.value===!0&&(Object.assign(v,{tabindex:0,...V.value,onClick:C,onKeyup:c}),G.unshift(m("div",{ref:D,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),m(be,v,()=>G)}function H(){let v;return n.header!==void 0?v=[].concat(n.header(Y.value)):(v=[m(be,()=>[m(Ve,{lines:e.labelLines},()=>e.label||""),e.caption?m(Ve,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&v[e.switchToggleSide===!0?"push":"unshift"](m(be,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>m(Fe,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&v[e.switchToggleSide===!0?"unshift":"push"](p()),v}function T(){const v={ref:"item",style:e.headerStyle,class:e.headerClass,dark:i.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return Q.value===!0&&(v.clickable=!0,v.onClick=l,Object.assign(v,B.value===!0?k.value:V.value)),m(Ft,v,H)}function j(){return Ue(m("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:t.value,id:f.value},fe(n.default)),[[mt,u.value]])}function R(){const v=[T(),m(Ut,{duration:e.duration,onShow:h,onHide:w},j)];return e.expandSeparator===!0&&v.push(m(Oe,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),m(Oe,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),v}return e.group!==void 0&&M(),Ze(()=>{L!==void 0&&L()}),()=>m("div",{class:O.value},[m("div",{class:"q-expansion-item__container relative-position"},R())])}});function ie(e,n,a,o){const i=[];return e.forEach(u=>{o(u)===!0?i.push(u):n.push({failedPropValidation:a,file:u})}),i}function Be(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ke(e)}const Lt={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Yt=["rejected"];function Rt({editable:e,dnd:n,getFileInput:a,addFilesToQueue:o}){const{props:i,emit:u,proxy:D}=Qe(),f=U(null),K=y(()=>i.accept!==void 0?i.accept.split(",").map(r=>(r=r.trim(),r==="*"?"*/":(r.endsWith("/*")&&(r=r.slice(0,r.length-1)),r.toUpperCase()))):null),S=y(()=>parseInt(i.maxFiles,10)),I=y(()=>parseInt(i.maxTotalSize,10));function _(r){if(e.value)if(r!==Object(r)&&(r={target:null}),r.target!==null&&r.target.matches('input[type="file"]')===!0)r.clientX===0&&r.clientY===0&&et(r);else{const q=a();q&&q!==r.target&&q.click(r)}}function L(r){e.value&&r&&o(null,r)}function O(r,q,Y,V){let l=Array.from(q||r.target.files);const c=[],C=()=>{c.length!==0&&u("rejected",c)};if(i.accept!==void 0&&K.value.indexOf("*/")===-1&&(l=ie(l,c,"accept",h=>K.value.some(w=>h.type.toUpperCase().startsWith(w)||h.name.toUpperCase().endsWith(w))),l.length===0))return C();if(i.maxFileSize!==void 0){const h=parseInt(i.maxFileSize,10);if(l=ie(l,c,"max-file-size",w=>w.size<=h),l.length===0)return C()}if(i.multiple!==!0&&l.length!==0&&(l=[l[0]]),l.forEach(h=>{h.__key=h.webkitRelativePath+h.lastModified+h.name+h.size}),V===!0){const h=Y.map(w=>w.__key);l=ie(l,c,"duplicate",w=>h.includes(w.__key)===!1)}if(l.length===0)return C();if(i.maxTotalSize!==void 0){let h=V===!0?Y.reduce((w,M)=>w+M.size,0):0;if(l=ie(l,c,"max-total-size",w=>(h+=w.size,h<=I.value)),l.length===0)return C()}if(typeof i.filter=="function"){const h=i.filter(l);l=ie(l,c,"filter",w=>h.includes(w))}if(i.maxFiles!==void 0){let h=V===!0?Y.length:0;if(l=ie(l,c,"max-files",()=>(h++,h<=S.value)),l.length===0)return C()}if(C(),l.length!==0)return l}function t(r){Be(r),n.value!==!0&&(n.value=!0)}function B(r){ke(r),(r.relatedTarget!==null||vt.is.safari!==!0?r.relatedTarget!==f.value:document.elementsFromPoint(r.clientX,r.clientY).includes(f.value)===!1)===!0&&(n.value=!1)}function k(r){Be(r);const q=r.dataTransfer.files;q.length!==0&&o(null,q),n.value=!1}function Q(r){if(n.value===!0)return m("div",{ref:f,class:`q-${r}__dnd absolute-full`,onDragenter:Be,onDragover:Be,onDragleave:B,onDrop:k})}return Object.assign(D,{pickFiles:_,addFiles:L}),{pickFiles:_,addFiles:L,onDragover:t,onDragleave:B,processFiles:O,getDndNode:Q,maxFilesNumber:S,maxTotalSizeNumber:I}}function je(e){return(e*100).toFixed(2)+"%"}const Tt={...Ce,...Lt,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},tt=[...Yt,"start","finish","added","removed"];function Vt(e,n){const a=Qe(),{props:o,slots:i,emit:u,proxy:D}=a,{$q:f}=D,K=ye(o,f);function S(A,F,z){if(A.__status=F,F==="idle"){A.__uploaded=0,A.__progress=0,A.__sizeLabel=Ke(A.size),A.__progressLabel="0.00%";return}if(F==="failed"){D.$forceUpdate();return}A.__uploaded=F==="uploaded"?A.size:z,A.__progress=F==="uploaded"?1:Math.min(.9999,A.__uploaded/A.size),A.__progressLabel=je(A.__progress),D.$forceUpdate()}const I=y(()=>o.disable!==!0&&o.readonly!==!0),_=U(!1),L=U(null),O=U(null),t={files:U([]),queuedFiles:U([]),uploadedFiles:U([]),uploadedSize:U(0),updateFileStatus:S,isAlive:()=>Bt(a)===!1},{pickFiles:B,addFiles:k,onDragover:Q,onDragleave:r,processFiles:q,getDndNode:Y,maxFilesNumber:V,maxTotalSizeNumber:l}=Rt({editable:I,dnd:_,getFileInput:s,addFilesToQueue:b});Object.assign(t,e({props:o,slots:i,emit:u,helpers:t,exposeApi:A=>{Object.assign(t,A)}})),t.isBusy===void 0&&(t.isBusy=U(!1));const c=U(0),C=y(()=>c.value===0?0:t.uploadedSize.value/c.value),h=y(()=>je(C.value)),w=y(()=>Ke(c.value)),M=y(()=>I.value===!0&&t.isUploading.value!==!0&&(o.multiple===!0||t.queuedFiles.value.length===0)&&(o.maxFiles===void 0||t.files.value.length<V.value)&&(o.maxTotalSize===void 0||c.value<l.value)),p=y(()=>I.value===!0&&t.isBusy.value!==!0&&t.isUploading.value!==!0&&t.queuedFiles.value.length!==0);pt(Ct,qe);const H=y(()=>"q-uploader column no-wrap"+(K.value===!0?" q-uploader--dark q-dark":"")+(o.bordered===!0?" q-uploader--bordered":"")+(o.square===!0?" q-uploader--square no-border-radius":"")+(o.flat===!0?" q-uploader--flat no-shadow":"")+(o.disable===!0?" disabled q-uploader--disable":"")+(_.value===!0?" q-uploader--dnd":"")),T=y(()=>"q-uploader__header"+(o.color!==void 0?` bg-${o.color}`:"")+(o.textColor!==void 0?` text-${o.textColor}`:""));me(t.isUploading,(A,F)=>{F===!1&&A===!0?u("start"):F===!0&&A===!1&&u("finish")});function j(){o.disable===!1&&(t.abort(),t.uploadedSize.value=0,c.value=0,g(),t.files.value=[],t.queuedFiles.value=[],t.uploadedFiles.value=[])}function R(){o.disable===!1&&G(["uploaded"],()=>{t.uploadedFiles.value=[]})}function v(){G(["idle","failed"],({size:A})=>{c.value-=A,t.queuedFiles.value=[]})}function G(A,F){if(o.disable===!0)return;const z={files:[],size:0},Z=t.files.value.filter(P=>A.indexOf(P.__status)===-1?!0:(z.size+=P.size,z.files.push(P),P.__img!==void 0&&window.URL.revokeObjectURL(P.__img.src),!1));z.files.length!==0&&(t.files.value=Z,F(z),u("removed",z.files))}function $(A){o.disable||(A.__status==="uploaded"?t.uploadedFiles.value=t.uploadedFiles.value.filter(F=>F.__key!==A.__key):A.__status==="uploading"?A.__abort():c.value-=A.size,t.files.value=t.files.value.filter(F=>F.__key!==A.__key?!0:(F.__img!==void 0&&window.URL.revokeObjectURL(F.__img.src),!1)),t.queuedFiles.value=t.queuedFiles.value.filter(F=>F.__key!==A.__key),u("removed",[A]))}function g(){t.files.value.forEach(A=>{A.__img!==void 0&&window.URL.revokeObjectURL(A.__img.src)})}function s(){return O.value||L.value.getElementsByClassName("q-uploader__input")[0]}function b(A,F){const z=q(A,F,t.files.value,!0),Z=s();Z!=null&&(Z.value=""),z!==void 0&&(z.forEach(P=>{if(t.updateFileStatus(P,"idle"),c.value+=P.size,o.noThumbnails!==!0&&P.type.toUpperCase().startsWith("IMAGE")){const Ne=new Image;Ne.src=window.URL.createObjectURL(P),P.__img=Ne}}),t.files.value=t.files.value.concat(z),t.queuedFiles.value=t.queuedFiles.value.concat(z),u("added",z),o.autoUpload===!0&&t.upload())}function te(){p.value===!0&&t.upload()}function oe(A,F,z){if(A===!0){const Z={type:"a",key:F,icon:f.iconSet.uploader[F],flat:!0,dense:!0};let P;return F==="add"?(Z.onClick=B,P=qe):Z.onClick=z,m(W,Z,P)}}function qe(){return m("input",{ref:O,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:o.accept,multiple:o.multiple===!0?"multiple":void 0,capture:o.capture,onMousedown:et,onClick:B,onChange:b})}function at(){return i.header!==void 0?i.header(le):[m("div",{class:"q-uploader__header-content column"},[m("div",{class:"flex flex-center no-wrap q-gutter-xs"},[oe(t.queuedFiles.value.length!==0,"removeQueue",v),oe(t.uploadedFiles.value.length!==0,"removeUploaded",R),t.isUploading.value===!0?m(Le,{class:"q-uploader__spinner"}):null,m("div",{class:"col column justify-center"},[o.label!==void 0?m("div",{class:"q-uploader__title"},[o.label]):null,m("div",{class:"q-uploader__subtitle"},[w.value+" / "+h.value])]),oe(M.value,"add"),oe(o.hideUploadBtn===!1&&p.value===!0,"upload",t.upload),oe(t.isUploading.value,"clear",t.abort)])])]}function nt(){return i.list!==void 0?i.list(le):t.files.value.map(A=>m("div",{key:A.__key,class:"q-uploader__file relative-position"+(o.noThumbnails!==!0&&A.__img!==void 0?" q-uploader__file--img":"")+(A.__status==="failed"?" q-uploader__file--failed":A.__status==="uploaded"?" q-uploader__file--uploaded":""),style:o.noThumbnails!==!0&&A.__img!==void 0?{backgroundImage:'url("'+A.__img.src+'")',backgroundSize:o.thumbnailFit}:null},[m("div",{class:"q-uploader__file-header row flex-center no-wrap"},[A.__status==="failed"?m(Fe,{class:"q-uploader__file-status",name:f.iconSet.type.negative,color:"negative"}):null,m("div",{class:"q-uploader__file-header-content col"},[m("div",{class:"q-uploader__title"},[A.name]),m("div",{class:"q-uploader__subtitle row items-center no-wrap"},[A.__sizeLabel+" / "+A.__progressLabel])]),A.__status==="uploading"?m(xt,{value:A.__progress,min:0,max:1,indeterminate:A.__progress===0}):m(W,{round:!0,dense:!0,flat:!0,icon:f.iconSet.uploader[A.__status==="uploaded"?"done":"clear"],onClick:()=>{$(A)}})])]))}Ze(()=>{t.isUploading.value===!0&&t.abort(),t.files.value.length!==0&&g()});const le={};for(const A in t)It(t[A])===!0?Qt(le,A,()=>t[A].value):le[A]=t[A];return Object.assign(le,{upload:te,reset:j,removeUploadedFiles:R,removeQueuedFiles:v,removeFile:$,pickFiles:B,addFiles:k}),ht(le,{canAddFiles:()=>M.value,canUpload:()=>p.value,uploadSizeLabel:()=>w.value,uploadProgressLabel:()=>h.value}),n({...t,upload:te,reset:j,removeUploadedFiles:R,removeQueuedFiles:v,removeFile:$,pickFiles:B,addFiles:k,canAddFiles:M,canUpload:p,uploadSizeLabel:w,uploadProgressLabel:h}),()=>{const A=[m("div",{class:T.value},at()),m("div",{class:"q-uploader__list scroll"},nt()),Y("uploader")];t.isBusy.value===!0&&A.push(m("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[m(Le)]));const F={ref:L,class:H.value};return M.value===!0&&Object.assign(F,{onDragover:Q,onDragleave:r}),m("div",F,A)}}const Mt=()=>!0;function zt(e){const n={};return e.forEach(a=>{n[a]=Mt}),n}const Ot=zt(tt),jt=({name:e,props:n,emits:a,injectPlugin:o})=>Ie({name:e,props:{...Tt,...n},emits:yt(a)===!0?{...Ot,...a}:[...tt,...a],setup(i,{expose:u}){return Vt(o,u)}});function ee(e){return typeof e=="function"?e:()=>e}const Gt="QUploader",Pt={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Ht=["factoryFailed","uploaded","failed","uploading"];function Jt({props:e,emit:n,helpers:a}){const o=U([]),i=U([]),u=U(0),D=y(()=>({url:ee(e.url),method:ee(e.method),headers:ee(e.headers),formFields:ee(e.formFields),fieldName:ee(e.fieldName),withCredentials:ee(e.withCredentials),sendRaw:ee(e.sendRaw),batch:ee(e.batch)})),f=y(()=>u.value>0),K=y(()=>i.value.length!==0);let S;function I(){o.value.forEach(t=>{t.abort()}),i.value.length!==0&&(S=!0)}function _(){const t=a.queuedFiles.value.slice(0);a.queuedFiles.value=[],D.value.batch(t)?L(t):t.forEach(B=>{L([B])})}function L(t){if(u.value++,typeof e.factory!="function"){O(t,{});return}const B=e.factory(t);if(!B)n("factoryFailed",new Error("QUploader: factory() does not return properly"),t),u.value--;else if(typeof B.catch=="function"&&typeof B.then=="function"){i.value.push(B);const k=Q=>{a.isAlive()===!0&&(i.value=i.value.filter(r=>r!==B),i.value.length===0&&(S=!1),a.queuedFiles.value=a.queuedFiles.value.concat(t),t.forEach(r=>{a.updateFileStatus(r,"failed")}),n("factoryFailed",Q,t),u.value--)};B.then(Q=>{S===!0?k(new Error("Aborted")):a.isAlive()===!0&&(i.value=i.value.filter(r=>r!==B),O(t,Q))}).catch(k)}else O(t,B||{})}function O(t,B){const k=new FormData,Q=new XMLHttpRequest,r=(p,H)=>B[p]!==void 0?ee(B[p])(H):D.value[p](H),q=r("url",t);if(!q){console.error("q-uploader: invalid or no URL specified"),u.value--;return}const Y=r("formFields",t);Y!==void 0&&Y.forEach(p=>{k.append(p.name,p.value)});let V=0,l=0,c=0,C=0,h;Q.upload.addEventListener("progress",p=>{if(h===!0)return;const H=Math.min(C,p.loaded);a.uploadedSize.value+=H-c,c=H;let T=c-l;for(let j=V;T>0&&j<t.length;j++){const R=t[j];if(T>R.size)T-=R.size,V++,l+=R.size,a.updateFileStatus(R,"uploading",R.size);else{a.updateFileStatus(R,"uploading",T);return}}},!1),Q.onreadystatechange=()=>{Q.readyState<4||(Q.status&&Q.status<400?(a.uploadedFiles.value=a.uploadedFiles.value.concat(t),t.forEach(p=>{a.updateFileStatus(p,"uploaded")}),n("uploaded",{files:t,xhr:Q})):(h=!0,a.uploadedSize.value-=c,a.queuedFiles.value=a.queuedFiles.value.concat(t),t.forEach(p=>{a.updateFileStatus(p,"failed")}),n("failed",{files:t,xhr:Q})),u.value--,o.value=o.value.filter(p=>p!==Q))},Q.open(r("method",t),q),r("withCredentials",t)===!0&&(Q.withCredentials=!0);const w=r("headers",t);w!==void 0&&w.forEach(p=>{Q.setRequestHeader(p.name,p.value)});const M=r("sendRaw",t);t.forEach(p=>{a.updateFileStatus(p,"uploading",0),M!==!0&&k.append(r("fieldName",p),p,p.name),p.xhr=Q,p.__abort=()=>{Q.abort()},C+=p.size}),n("uploading",{files:t,xhr:Q}),o.value.push(Q),M===!0?Q.send(new Blob(t)):Q.send(k)}return{isUploading:f,isBusy:K,abort:I,upload:_}}const Wt={name:Gt,props:Pt,emits:Ht,injectPlugin:Jt},$t=jt(Wt);/*!
 * hash-wasm (https://www.npmjs.com/package/hash-wasm)
 * (c) Dani Biro
 * @license MIT
 */function ve(e,n,a,o){function i(u){return u instanceof a?u:new a(function(D){D(u)})}return new(a||(a=Promise))(function(u,D){function f(I){try{S(o.next(I))}catch(_){D(_)}}function K(I){try{S(o.throw(I))}catch(_){D(_)}}function S(I){I.done?u(I.value):i(I.value).then(f,K)}S((o=o.apply(e,[])).next())})}class N{constructor(){this.mutex=Promise.resolve()}lock(){let n=()=>{};return this.mutex=this.mutex.then(()=>new Promise(n)),new Promise(a=>{n=a})}dispatch(n){return ve(this,void 0,void 0,function*(){const a=yield this.lock();try{return yield Promise.resolve(n())}finally{a()}})}}var Ee;function Xt(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global}const xe=Xt(),Se=(Ee=xe.Buffer)!==null&&Ee!==void 0?Ee:null,Zt=xe.TextEncoder?new xe.TextEncoder:null;function ot(e,n){return(e&15)+(e>>6|e>>3&8)<<4|(n&15)+(n>>6|n>>3&8)}function eo(e,n){const a=n.length>>1;for(let o=0;o<a;o++){const i=o<<1;e[o]=ot(n.charCodeAt(i),n.charCodeAt(i+1))}}function to(e,n){if(e.length!==n.length*2)return!1;for(let a=0;a<n.length;a++){const o=a<<1;if(n[a]!==ot(e.charCodeAt(o),e.charCodeAt(o+1)))return!1}return!0}const Ge=87,Pe=48;function He(e,n,a){let o=0;for(let i=0;i<a;i++){let u=n[i]>>>4;e[o++]=u>9?u+Ge:u+Pe,u=n[i]&15,e[o++]=u>9?u+Ge:u+Pe}return String.fromCharCode.apply(null,e)}const Je=Se!==null?e=>{if(typeof e=="string"){const n=Se.from(e,"utf8");return new Uint8Array(n.buffer,n.byteOffset,n.length)}if(Se.isBuffer(e))return new Uint8Array(e.buffer,e.byteOffset,e.length);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")}:e=>{if(typeof e=="string")return Zt.encode(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")},We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ge=new Uint8Array(256);for(let e=0;e<We.length;e++)ge[We.charCodeAt(e)]=e;function oo(e){let n=Math.floor(e.length*.75);const a=e.length;return e[a-1]==="="&&(n-=1,e[a-2]==="="&&(n-=1)),n}function ao(e){const n=oo(e),a=e.length,o=new Uint8Array(n);let i=0;for(let u=0;u<a;u+=4){const D=ge[e.charCodeAt(u)],f=ge[e.charCodeAt(u+1)],K=ge[e.charCodeAt(u+2)],S=ge[e.charCodeAt(u+3)];o[i]=D<<2|f>>4,i+=1,o[i]=(f&15)<<4|K>>2,i+=1,o[i]=(K&3)<<6|S&63,i+=1}return o}const pe=16*1024,ce=4,no=new N,_e=new Map;function lo(e,n){return ve(this,void 0,void 0,function*(){let a=null,o=null,i=!1;if(typeof WebAssembly>"u")throw new Error("WebAssembly is not supported in this environment!");const u=(l,c=0)=>{o.set(l,c)},D=()=>o,f=()=>a.exports,K=l=>{a.exports.Hash_SetMemorySize(l);const c=a.exports.Hash_GetBuffer(),C=a.exports.memory.buffer;o=new Uint8Array(C,c,l)},S=()=>new DataView(a.exports.memory.buffer).getUint32(a.exports.STATE_SIZE,!0),I=no.dispatch(()=>ve(this,void 0,void 0,function*(){if(!_e.has(e.name)){const c=ao(e.data),C=WebAssembly.compile(c);_e.set(e.name,C)}const l=yield _e.get(e.name);a=yield WebAssembly.instantiate(l,{})})),_=()=>ve(this,void 0,void 0,function*(){a||(yield I);const l=a.exports.Hash_GetBuffer(),c=a.exports.memory.buffer;o=new Uint8Array(c,l,pe)}),L=(l=null)=>{i=!0,a.exports.Hash_Init(l)},O=l=>{let c=0;for(;c<l.length;){const C=l.subarray(c,c+pe);c+=C.length,o.set(C),a.exports.Hash_Update(C.length)}},t=l=>{if(!i)throw new Error("update() called before init()");const c=Je(l);O(c)},B=new Uint8Array(n*2),k=(l,c=null)=>{if(!i)throw new Error("digest() called before init()");return i=!1,a.exports.Hash_Final(c),l==="binary"?o.slice(0,n):He(B,o,n)},Q=()=>{if(!i)throw new Error("save() can only be called after init() and before digest()");const l=a.exports.Hash_GetState(),c=S(),C=a.exports.memory.buffer,h=new Uint8Array(C,l,c),w=new Uint8Array(ce+c);return eo(w,e.hash),w.set(h,ce),w},r=l=>{if(!(l instanceof Uint8Array))throw new Error("load() expects an Uint8Array generated by save()");const c=a.exports.Hash_GetState(),C=S(),h=ce+C,w=a.exports.memory.buffer;if(l.length!==h)throw new Error(`Bad state length (expected ${h} bytes, got ${l.length})`);if(!to(e.hash,l.subarray(0,ce)))throw new Error("This state was written by an incompatible hash implementation");const M=l.subarray(ce);new Uint8Array(w,c,C).set(M),i=!0},q=l=>typeof l=="string"?l.length<pe/4:l.byteLength<pe;let Y=q;switch(e.name){case"argon2":case"scrypt":Y=()=>!0;break;case"blake2b":case"blake2s":Y=(l,c)=>c<=512&&q(l);break;case"blake3":Y=(l,c)=>c===0&&q(l);break;case"xxhash64":case"xxhash3":case"xxhash128":case"crc64":Y=()=>!1;break}const V=(l,c=null,C=null)=>{if(!Y(l,c))return L(c),t(l),k("hex",C);const h=Je(l);return o.set(h),a.exports.Hash_Calculate(h.length,c,C),He(B,o,n)};return yield _(),{getMemory:D,writeMemory:u,getExports:f,setMemorySize:K,init:L,update:t,digest:k,save:Q,load:r,calculate:V,hashLength:n}})}function so(e,n,a){return ve(this,void 0,void 0,function*(){const o=yield e.lock(),i=yield lo(n,a);return o(),i})}new N;new N;new N;new N;new N;new N;new N;new N;new N;var io="sha3",ro="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",uo="fb24e536",Ao={name:io,data:ro,hash:uo};const co=new N;let de=null;function $e(e){return[224,256,384,512].includes(e)?null:new Error("Invalid variant! Valid values: 224, 256, 384, 512")}function go(e,n=512){if($e(n))return Promise.reject($e(n));const a=n/8;if(de===null||de.hashLength!==a)return so(co,Ao,a).then(o=>(de=o,de.calculate(e,n,6)));try{const o=de.calculate(e,n,6);return Promise.resolve(o)}catch(o){return Promise.reject(o)}}new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;const fo={key:0,class:"row justify-center"},mo={class:"col-12 col-md-6 q-pa-md"},vo={class:"row justify-center q-mt-md"},Io={key:1},Qo={class:"row q-mb-md"},ho={class:"col-12 flex justify-between items-center"},Bo={class:"row q-col-gutter-md items-center"},po={class:"col-12 col-md-4"},Co={class:"col-12 col-md-6"},yo={class:"col-12 col-md-2 flex justify-center"},wo={class:"row q-col-gutter-md items-center"},bo={class:"col-12 col-md-4"},Do={class:"col-12 col-md-6"},Eo={class:"col-12 col-md-2 flex justify-center"},So={class:"row q-col-gutter-md items-center"},_o={class:"col-12 col-md-4"},Uo={class:"col-12 col-md-6"},Fo={class:"col-12 col-md-2 flex justify-center"},xo={class:"row q-col-gutter-md items-center"},ko={class:"col-12 col-md-8"},qo={class:"col-12 col-md-4 flex justify-center"},No={class:"row q-col-gutter-md"},Ko={class:"col-12 col-md-3"},Lo={class:"col-12 col-md-3"},Yo={class:"col-12 col-md-6"},Ro={key:2},Ho={__name:"EditorPage",emits:["hideDrawers"],setup(e,{emit:n}){const a=n,o=wt();async function i(g){const s=new TextEncoder().encode(g);return await go(s,512)}const u=U([]);async function D(){try{const g=await fetch(J.value.filesList);if(!g.ok)throw new Error(`Failed to fetch: ${g.status}`);const s=await g.json();u.value=s}catch(g){console.error("Error refreshing list:",g),f.notify({type:"negative",message:"Failed to load list"})}}const f=At(),K=U(J.value.editorRoot+"editor.php?action=upload"),S=U(!1),I=U(!1),_=U(""),L=U(!1),O=()=>{window.location.href="/"},t=he({username:"",password:""}),B=U(null),k=he({name:"",apiKey:""}),Q=he({docBase:null,newKey:""}),r=he({docBase:null,newBaseName:""}),q=U({docBase:null}),Y=U(!1),V=U(!1);bt(async()=>{a("hideDrawers",!0),await l(),D()});async function l(){try{const s=await(await fetch(J.value.editorRoot+"editor.php?action=check",{method:"GET",credentials:"include"})).json();s.success&&s.message!="Disabled"&&(S.value=!0),s.success||(S.value=!1),s.message=="Disabled"&&(o.replace("/404"),L.value=!0)}catch(g){console.error("Auth check error:",g)}}async function c(){I.value=!0,_.value="";try{const g=await i(t.password),s={username:t.username,password:g},te=await(await fetch(J.value.editorRoot+"editor.php?action=login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"})).json();te.success?S.value=!0:_.value=te.message||"Login failed"}catch(g){console.error("Login error:",g),_.value="Server error during login"}finally{I.value=!1}}async function C(){I.value=!0;try{await fetch(J.value.editorRoot+"editor.php?action=logout",{method:"POST",credentials:"include"}),S.value=!1,B.value=null}catch(g){console.error("Logout error:",g)}finally{I.value=!1}}async function h(){if(!k.name||!k.apiKey){f.notify({color:"negative",message:"Please provide both name and API key"});return}I.value=!0;try{const s=await(await fetch(J.value.editorRoot+"editor.php?action=add_doc_base",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k),credentials:"include"})).json();s.success?(f.notify({color:"positive",message:"Document base added successfully"}),k.name="",k.apiKey=""):f.notify({color:"negative",message:s.message||"Failed to add document base"})}catch(g){console.error("Add doc base error:",g),f.notify({color:"negative",message:"Server error while adding document base"})}finally{I.value=!1}}async function w(){if(!r.docBase||!r.newBaseName){f.notify({color:"negative",message:"Please select a document base and provide a new name"});return}I.value=!0;try{const s=await(await fetch(J.value.editorRoot+"editor.php?action=rename_doc_base",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docBase:r.docBase,newName:r.newBaseName}),credentials:"include"})).json();s.success?(D(),f.notify({color:"positive",message:"Document base renamed successfully"}),r.docBase=null,r.newBaseName=""):f.notify({color:"negative",message:s.message||"Failed to rename document base"})}catch(g){console.error("Rename document base error:",g),f.notify({color:"negative",message:"Server error while renaming document base"})}finally{I.value=!1}}async function M(){if(!Q.docBase||!Q.newKey){f.notify({color:"negative",message:"Please select a document base and provide a new API key"});return}I.value=!0;try{const s=await(await fetch(J.value.editorRoot+"editor.php?action=update_api_key",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docBase:Q.docBase,apiKey:Q.newKey}),credentials:"include"})).json();s.success?(f.notify({color:"positive",message:"API key updated successfully"}),Q.docBase=null,Q.newKey=""):f.notify({color:"negative",message:s.message||"Failed to update API key"})}catch(g){console.error("Update API key error:",g),f.notify({color:"negative",message:"Server error while updating API key"})}finally{I.value=!1}}const p=async()=>{Y.value=!0;try{const s=await(await fetch(J.value.editorRoot+"editor.php?action=delete_doc_base",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docBase:q.value.docBase}),credentials:"include"})).json();s.success?(f.notify({type:"positive",message:"Document base deleted successfully"}),q.value.docBase=null):f.notify({type:"negative",message:s.message||"Failed to delete document base"})}catch(g){console.error("Error deleting document base:",g),f.notify({type:"negative",message:"Error deleting document base: "+g.message})}finally{Y.value=!1}};function H(g){return g.filter(s=>s.type==="application/pdf")}const T=U(null),j=U([]),R=U("");me(B,async g=>{if(T.value=null,g)try{const b=await(await fetch(J.value.filesList+`?db=${g}`)).json(),te=[...new Set(b.files.map(oe=>oe.folder))];j.value=te}catch(s){console.error("Error fetching folders:",s)}else j.value=[]});const v=y(()=>{const g=[];return B.value&&g.push({name:"db",value:B.value}),T.value&&g.push({name:"folder",value:T.value}),g}),G=()=>{R.value&&!T.value&&(T.value=R.value,j.value.includes(R.value)||j.value.push(R.value)),R.value=""},$=(g,s)=>{R.value=g,s()};return(g,s)=>(re(),Ye(kt,{padding:""},{default:x(()=>[!S.value&&!L.value?(re(),we("div",fo,[E("div",mo,[d(ae,{flat:"",class:"q-pa-md bg-grey-3"},{default:x(()=>[d(X,null,{default:x(()=>s[14]||(s[14]=[E("div",{class:"text-h6"},"Login",-1)])),_:1}),d(X,null,{default:x(()=>[E("form",{onSubmit:Et(c,["prevent"])},[d(se,{modelValue:t.username,"onUpdate:modelValue":s[0]||(s[0]=b=>t.username=b),autocomplete:"username",label:"Username",dense:!0},null,8,["modelValue"]),d(se,{modelValue:t.password,"onUpdate:modelValue":s[1]||(s[1]=b=>t.password=b),autocomplete:"current-password",label:"Password",dense:!0,type:"password",class:"q-mt-sm"},null,8,["modelValue"])],32)]),_:1}),d(ze,{align:"right"},{default:x(()=>[d(W,{color:"primary",unelevated:"",square:"",label:"Login",onClick:c,loading:I.value},null,8,["loading"])]),_:1}),_.value?(re(),Ye(X,{key:0},{default:x(()=>[d(qt,{rounded:"",class:"bg-negative text-white"},{default:x(()=>[Re(Te(_.value),1)]),_:1})]),_:1})):Dt("",!0)]),_:1}),E("div",vo,[d(W,{color:"accent",unelevated:"",square:"",class:"col-md-6",label:"Home",onClick:O})])])])):L.value?(re(),we("div",Ro," Config / Document editor is not enabled ")):(re(),we("div",Io,[E("div",Qo,[E("div",ho,[s[15]||(s[15]=E("h6",{class:"q-my-none"},"Document & Config Management",-1)),d(W,{color:"accent",unelevated:"",square:"",label:"Logout",onClick:C})])]),d(Ae,{icon:"menu_book",dense:"",label:"Add New Document Base","header-class":"bg-primary text-white text-subtitle1","expand-icon-class":"text-white"},{default:x(()=>[d(ae,{class:"bg-grey-3"},{default:x(()=>[d(X,null,{default:x(()=>[E("div",Bo,[E("div",po,[d(se,{modelValue:k.name,"onUpdate:modelValue":s[2]||(s[2]=b=>k.name=b),label:"Document Base Name"},null,8,["modelValue"])]),E("div",Co,[d(se,{modelValue:k.apiKey,"onUpdate:modelValue":s[3]||(s[3]=b=>k.apiKey=b),label:"API Key"},null,8,["modelValue"])]),E("div",yo,[d(W,{color:"primary",unelevated:"",square:"",label:"Add",onClick:h,loading:I.value},null,8,["loading"])])])]),_:1})]),_:1})]),_:1}),d(Ae,{icon:"published_with_changes",dense:"",label:"Rename Document Base","header-class":"bg-primary text-white text-subtitle1","expand-icon-class":"text-white",class:"q-mt-md"},{default:x(()=>[d(ae,{class:"bg-grey-3"},{default:x(()=>[d(X,null,{default:x(()=>[E("div",wo,[E("div",bo,[d(ue,{modelValue:r.docBase,"onUpdate:modelValue":s[4]||(s[4]=b=>r.docBase=b),options:u.value,label:"Select Document Base"},null,8,["modelValue","options"])]),E("div",Do,[d(se,{modelValue:r.newBaseName,"onUpdate:modelValue":s[5]||(s[5]=b=>r.newBaseName=b),label:"New Document Base Name"},null,8,["modelValue"])]),E("div",Eo,[d(W,{color:"warning",unelevated:"",square:"",label:"Update",onClick:w,loading:I.value},null,8,["loading"])])])]),_:1})]),_:1})]),_:1}),d(Ae,{icon:"edit",dense:"",label:"Update Document Base API Key","header-class":"bg-primary text-white text-subtitle1","expand-icon-class":"text-white",class:"q-mt-md"},{default:x(()=>[d(ae,{class:"bg-grey-3"},{default:x(()=>[d(X,null,{default:x(()=>[E("div",So,[E("div",_o,[d(ue,{modelValue:Q.docBase,"onUpdate:modelValue":s[6]||(s[6]=b=>Q.docBase=b),options:u.value,label:"Select Document Base"},null,8,["modelValue","options"])]),E("div",Uo,[d(se,{modelValue:Q.newKey,"onUpdate:modelValue":s[7]||(s[7]=b=>Q.newKey=b),label:"New API Key"},null,8,["modelValue"])]),E("div",Fo,[d(W,{color:"warning",unelevated:"",square:"",label:"Update",onClick:M,loading:I.value},null,8,["loading"])])])]),_:1})]),_:1})]),_:1}),d(Ae,{icon:"delete",dense:"",label:"Delete Document Base","header-class":"bg-primary text-white text-subtitle1","expand-icon-class":"text-white",class:"q-mt-md"},{default:x(()=>[d(ae,{class:"bg-grey-3"},{default:x(()=>[d(X,null,{default:x(()=>[E("div",xo,[E("div",ko,[s[16]||(s[16]=E("span",{class:"text-negative text-body2"},"This will remove the document base from this user interface but this will not delete any file or API key on Vauban servers.",-1)),d(ue,{modelValue:q.value.docBase,"onUpdate:modelValue":s[8]||(s[8]=b=>q.value.docBase=b),options:u.value,onFocus:D,label:"Select Document Base to Delete"},null,8,["modelValue","options"])]),E("div",qo,[d(W,{color:"negative",unelevated:"",square:"",label:"Delete",onClick:s[9]||(s[9]=b=>V.value=!0),loading:Y.value},null,8,["loading"])])])]),_:1})]),_:1})]),_:1}),d(ct,{modelValue:V.value,"onUpdate:modelValue":s[10]||(s[10]=b=>V.value=b),persistent:""},{default:x(()=>[d(ae,null,{default:x(()=>[d(X,{class:"row items-center"},{default:x(()=>[d(St,{icon:"delete",color:"negative","text-color":"white"}),s[17]||(s[17]=E("span",{class:"q-ml-sm"},"Confirm Deletion",-1))]),_:1}),d(X,null,{default:x(()=>[Re(' Are you sure you want to delete "'+Te(q.value.docBase)+'"? ',1)]),_:1}),d(ze,{align:"right"},{default:x(()=>[Ue(d(W,{flat:"",label:"Cancel",color:"primary"},null,512),[[Me]]),Ue(d(W,{flat:"",label:"Delete",color:"negative",onClick:p},null,512),[[Me]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),d(Ae,{icon:"upload",label:"Upload Documents","header-class":"bg-primary text-white text-subtitle1",class:"q-mt-md","expand-icon-class":"text-white"},{default:x(()=>[d(ae,{class:"bg-grey-3"},{default:x(()=>[d(X,null,{default:x(()=>[E("div",No,[E("div",Ko,[d(ue,{modelValue:B.value,"onUpdate:modelValue":s[11]||(s[11]=b=>B.value=b),options:_t(J).tabList,label:"Select Document Base",onFocus:s[12]||(s[12]=b=>T.value=null)},null,8,["modelValue","options"])]),E("div",Lo,[d(ue,{modelValue:T.value,"onUpdate:modelValue":s[13]||(s[13]=b=>T.value=b),options:j.value,label:"Select or Add Folder","use-input":"","hide-selected":"","fill-input":"","new-value-mode":"add-unique",disable:!B.value,onFilter:$,onBlur:G},null,8,["modelValue","options","disable"])]),E("div",Yo,[E("div",null,[d($t,{url:K.value,"with-credentials":"",square:"",flat:"",bordered:"",class:"full-width",multiple:"",batch:"",accept:".pdf",filter:H,"field-name":"files[]","form-fields":v.value,disable:!B.value||!T.value,style:{"max-width":"100%"}},null,8,["url","form-fields","disable"])])])])]),_:1})]),_:1})]),_:1})]))]),_:1}))}};export{Ho as default};
