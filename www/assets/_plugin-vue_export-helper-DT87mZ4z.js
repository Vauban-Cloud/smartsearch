import{c as et,g as ot,r as O,a as g,w as E,d as C,q as x,u as H,h as A,ac as st,b as nt,A as at}from"./index-C0eCNP-3.js";import{u as it,s as lt,v as rt,r as q,t as T,a as ct,w as ut,x as D,y as dt,b as ft,z as ht,A as vt,B as gt,d as mt,C as pt,D as yt,E as M,F as Tt,c as j,h as _t}from"./QDialog-sxy4Ayzw.js";const Pt=et({name:"QTooltip",inheritAttrs:!1,props:{...ut,...ct,...T,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...T.transitionShow,default:"jump-down"},transitionHide:{...T.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:q},self:{type:String,default:"top middle",validator:q},offset:{type:Array,default:()=>[14,14],validator:rt},scrollTarget:lt,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...it],setup(t,{slots:s,emit:e,attrs:n}){let o,i;const m=ot(),{proxy:{$q:l}}=m,u=O(null),h=O(!1),B=g(()=>D(t.anchor,l.lang.rtl)),L=g(()=>D(t.self,l.lang.rtl)),Q=g(()=>t.persistent!==!0),{registerTick:W,removeTick:N}=dt(),{registerTimeout:v}=ft(),{transitionProps:R,transitionStyle:z}=ht(t),{localScrollTarget:_,changeScrollEvent:F,unconfigureScrollTarget:I}=vt(t,P),{anchorEl:r,canShow:U,anchorEvents:d}=gt({showing:h,configureAnchorEl:Y}),{show:V,hide:p}=mt({showing:h,canShow:U,handleShow:G,handleHide:J,hideOnRouteChange:Q,processOnMount:!0});Object.assign(d,{delayShow:K,delayHide:X});const{showPortal:b,hidePortal:S,renderPortal:$}=pt(m,u,tt,"tooltip");if(l.platform.is.mobile===!0){const a={anchorEl:r,innerRef:u,onClickOutside(c){return p(c),c.target.classList.contains("q-dialog__backdrop")&&at(c),!0}},y=g(()=>t.modelValue===null&&t.persistent!==!0&&h.value===!0);E(y,c=>{(c===!0?yt:M)(a)}),C(()=>{M(a)})}function G(a){b(),W(()=>{i=new MutationObserver(()=>f()),i.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),f(),P()}),o===void 0&&(o=E(()=>l.screen.width+"|"+l.screen.height+"|"+t.self+"|"+t.anchor+"|"+l.lang.rtl,f)),v(()=>{b(!0),e("show",a)},t.transitionDuration)}function J(a){N(),S(),w(),v(()=>{S(!0),e("hide",a)},t.transitionDuration)}function w(){i!==void 0&&(i.disconnect(),i=void 0),o!==void 0&&(o(),o=void 0),I(),x(d,"tooltipTemp")}function f(){Tt({targetEl:u.value,offset:t.offset,anchorEl:r.value,anchorOrigin:B.value,selfOrigin:L.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function K(a){if(l.platform.is.mobile===!0){j(),document.body.classList.add("non-selectable");const y=r.value,c=["touchmove","touchcancel","touchend","click"].map(k=>[y,k,"delayHide","passiveCapture"]);H(d,"tooltipTemp",c)}v(()=>{V(a)},t.delay)}function X(a){l.platform.is.mobile===!0&&(x(d,"tooltipTemp"),j(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),v(()=>{p(a)},t.hideDelay)}function Y(){if(t.noParentEvent===!0||r.value===null)return;const a=l.platform.is.mobile===!0?[[r.value,"touchstart","delayShow","passive"]]:[[r.value,"mouseenter","delayShow","passive"],[r.value,"mouseleave","delayHide","passive"]];H(d,"anchor",a)}function P(){if(r.value!==null||t.scrollTarget!==void 0){_.value=_t(r.value,t.scrollTarget);const a=t.noParentEvent===!0?f:p;F(_.value,a)}}function Z(){return h.value===!0?A("div",{...n,ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",n.class],style:[n.style,z.value],role:"tooltip"},nt(s.default)):null}function tt(){return A(st,R.value,Z)}return C(w),Object.assign(m.proxy,{updatePosition:f}),$}});class bt{constructor(){this.__stack={}}on(s,e,n){return(this.__stack[s]||(this.__stack[s]=[])).push({fn:e,ctx:n}),this}once(s,e,n){const o=(...i)=>{this.off(s,o),e.apply(n,i)};return o.__callback=e,this.on(s,o,n)}emit(s){const e=this.__stack[s];if(e!==void 0){const n=[].slice.call(arguments,1);e.forEach(o=>{o.fn.apply(o.ctx,n)})}return this}off(s,e){const n=this.__stack[s];if(n===void 0)return this;if(e===void 0)return delete this.__stack[s],this;const o=n.filter(i=>i.fn!==e&&i.fn.__callback!==e);return o.length!==0?this.__stack[s]=o:delete this.__stack[s],this}}const kt=new bt,Ot=(t,s)=>{const e=t.__vccOpts||t;for(const[n,o]of s)e[n]=o;return e};export{Pt as Q,Ot as _,kt as b};
